{"numFailedTestSuites":0,"numFailedTests":0,"numPassedTestSuites":1,"numPassedTests":41,"numPendingTestSuites":0,"numPendingTests":0,"numRuntimeErrorTestSuites":0,"numTodoTests":0,"numTotalTestSuites":1,"numTotalTests":41,"openHandles":[],"snapshot":{"added":0,"didUpdate":false,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0},"startTime":1771261591874,"success":true,"testResults":[{"assertionResults":[{"ancestorTitles":["segmentsToText"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"segmentsToText separates word-segments with spaces","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1771261592550,"status":"passed","title":"separates word-segments with spaces"},{"ancestorTitles":["segmentsToText"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"segmentsToText removes extra space after maqaf (U+05BE)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1771261592552,"status":"passed","title":"removes extra space after maqaf (U+05BE)"},{"ancestorTitles":["segmentsToText"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"segmentsToText adds space from stuma/ptuha segments","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1771261592553,"status":"passed","title":"adds space from stuma/ptuha segments"},{"ancestorTitles":["segmentsToText"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"segmentsToText handles ktiv segments","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1771261592553,"status":"passed","title":"handles ktiv segments"},{"ancestorTitles":["segmentsToText"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"segmentsToText returns empty string for no qri/ktiv segments","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1771261592553,"status":"passed","title":"returns empty string for no qri/ktiv segments"},{"ancestorTitles":["stripTaamim"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"stripTaamim removes cantillation marks (U+0591–U+05AF)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1771261592553,"status":"passed","title":"removes cantillation marks (U+0591–U+05AF)"},{"ancestorTitles":["stripTaamim"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"stripTaamim keeps nikud (vowels, U+05B0–U+05BD)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1771261592554,"status":"passed","title":"keeps nikud (vowels, U+05B0–U+05BD)"},{"ancestorTitles":["stripTaamim"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"stripTaamim keeps maqaf (U+05BE) and sof pasuq (U+05C3)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1771261592554,"status":"passed","title":"keeps maqaf (U+05BE) and sof pasuq (U+05C3)"},{"ancestorTitles":["stripTaamim"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"stripTaamim handles empty string","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1771261592554,"status":"passed","title":"handles empty string"},{"ancestorTitles":["reverseGraphemes"],"duration":10,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"reverseGraphemes reverses simple Hebrew text","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1771261592554,"status":"passed","title":"reverses simple Hebrew text"},{"ancestorTitles":["reverseGraphemes"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"reverseGraphemes keeps nikud attached to base characters","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1771261592564,"status":"passed","title":"keeps nikud attached to base characters"},{"ancestorTitles":["reverseGraphemes"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"reverseGraphemes reverses word order for multi-word text","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1771261592565,"status":"passed","title":"reverses word order for multi-word text"},{"ancestorTitles":["reverseGraphemes"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"reverseGraphemes handles empty string","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1771261592565,"status":"passed","title":"handles empty string"},{"ancestorTitles":["reverseGraphemes"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"reverseGraphemes preserves maqaf position between reversed words","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1771261592565,"status":"passed","title":"preserves maqaf position between reversed words"},{"ancestorTitles":["stripHtml"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"stripHtml strips HTML tags","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1771261592566,"status":"passed","title":"strips HTML tags"},{"ancestorTitles":["stripHtml"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"stripHtml decodes HTML entities","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1771261592566,"status":"passed","title":"decodes HTML entities"},{"ancestorTitles":["stripHtml"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"stripHtml handles empty string","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1771261592566,"status":"passed","title":"handles empty string"},{"ancestorTitles":["stripHtml"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"stripHtml handles br tags as spaces","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1771261592566,"status":"passed","title":"handles br tags as spaces"},{"ancestorTitles":["wrapText"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"wrapText wraps long text into multiple lines","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1771261592567,"status":"passed","title":"wraps long text into multiple lines"},{"ancestorTitles":["wrapText"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"wrapText keeps short text on one line","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1771261592567,"status":"passed","title":"keeps short text on one line"},{"ancestorTitles":["wrapText"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"wrapText returns empty line for empty text","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1771261592568,"status":"passed","title":"returns empty line for empty text"},{"ancestorTitles":["wrapText"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"wrapText handles a single very long word","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1771261592568,"status":"passed","title":"handles a single very long word"},{"ancestorTitles":["semanticPagesToPerekIds"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"semanticPagesToPerekIds maps Hebrew semantic names to correct perek IDs","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1771261592568,"status":"passed","title":"maps Hebrew semantic names to correct perek IDs"},{"ancestorTitles":["semanticPagesToPerekIds"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"semanticPagesToPerekIds deduplicates perek IDs","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1771261592569,"status":"passed","title":"deduplicates perek IDs"},{"ancestorTitles":["semanticPagesToPerekIds"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"semanticPagesToPerekIds skips pages with invalid semantic names","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1771261592570,"status":"passed","title":"skips pages with invalid semantic names"},{"ancestorTitles":["semanticPagesToPerekIds"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"semanticPagesToPerekIds skips perek numbers beyond sefer range","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1771261592570,"status":"passed","title":"skips perek numbers beyond sefer range"},{"ancestorTitles":["buildTanachPdfForPerekRange"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"buildTanachPdfForPerekRange produces a Uint8Array","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1771261592570,"status":"passed","title":"produces a Uint8Array"},{"ancestorTitles":["buildTanachPdfForPerekRange"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"buildTanachPdfForPerekRange registers fontkit and embeds two fonts (regular + bold)","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1771261592572,"status":"passed","title":"registers fontkit and embeds two fonts (regular + bold)"},{"ancestorTitles":["buildTanachPdfForPerekRange"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"buildTanachPdfForPerekRange creates a new page for each perek","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1771261592572,"status":"passed","title":"creates a new page for each perek"},{"ancestorTitles":["buildTanachPdfForPerekRange"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"buildTanachPdfForPerekRange draws combined title + header in bold (like TOC)","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1771261592573,"status":"passed","title":"draws combined title + header in bold (like TOC)"},{"ancestorTitles":["buildTanachPdfForPerekRange"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"buildTanachPdfForPerekRange right-aligns reversed text for RTL visual layout","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1771261592574,"status":"passed","title":"right-aligns reversed text for RTL visual layout"},{"ancestorTitles":["buildTanachPdfForPerekRange"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"buildTanachPdfForPerekRange handles perek with empty header (title only, no dash)","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1771261592575,"status":"passed","title":"handles perek with empty header (title only, no dash)"},{"ancestorTitles":["buildTanachPdfForPerekRange"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"buildTanachPdfForPerekRange includes perushim section when available","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1771261592575,"status":"passed","title":"includes perushim section when available"},{"ancestorTitles":["buildTanachPdfForPerekRange"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"buildTanachPdfForPerekRange includes articles section when available","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1771261592576,"status":"passed","title":"includes articles section when available"},{"ancestorTitles":["buildTanachPdfForPerekRange"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"buildTanachPdfForPerekRange gracefully handles DB errors for perushim/articles","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1771261592577,"status":"passed","title":"gracefully handles DB errors for perushim/articles"},{"ancestorTitles":["buildTanachPdfForPerekRange"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"buildTanachPdfForPerekRange adds page numbers to all pages","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1771261592577,"status":"passed","title":"adds page numbers to all pages"},{"ancestorTitles":["createTanachPageRangesHandler"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"createTanachPageRangesHandler uses semanticPages to resolve perek IDs (not hardcoded formula)","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"startAt":1771261592578,"status":"passed","title":"uses semanticPages to resolve perek IDs (not hardcoded formula)"},{"ancestorTitles":["createTanachPageRangesHandler"],"duration":11,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"createTanachPageRangesHandler throws when context.seferName is missing","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1771261592579,"status":"passed","title":"throws when context.seferName is missing"},{"ancestorTitles":["createTanachPageRangesHandler"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"createTanachPageRangesHandler throws when context is undefined","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1771261592590,"status":"passed","title":"throws when context is undefined"},{"ancestorTitles":["createTanachPageRangesHandler"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"createTanachPageRangesHandler throws when no content pages in semantic info","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1771261592591,"status":"passed","title":"throws when no content pages in semantic info"},{"ancestorTitles":["createTanachPageRangesHandler"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"createTanachPageRangesHandler ignores raw pages parameter (uses semanticPages only)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1771261592591,"status":"passed","title":"ignores raw pages parameter (uses semanticPages only)"}],"endTime":1771261592593,"message":"","name":"C:\\Users\\Dorad\\git\\bible-on-site\\web\\bible-on-site\\tests\\unit\\lib\\tanach-pdf.test.ts","startTime":1771261592347,"status":"passed","summary":""}],"wasInterrupted":false}
